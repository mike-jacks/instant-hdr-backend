basePath: /api/v1
definitions:
  models.CreateOrderRequest:
    properties:
      metadata:
        additionalProperties: true
        description: Optional metadata to store with order
        type: object
    type: object
  models.ErrorResponse:
    properties:
      error:
        type: string
      message:
        type: string
    type: object
  models.FileInfo:
    properties:
      filename:
        type: string
      size:
        type: integer
    type: object
  models.FileResponse:
    properties:
      created_at:
        type: string
      file_size:
        type: integer
      filename:
        type: string
      id:
        type: string
      is_final:
        type: boolean
      mime_type:
        type: string
      storage_url:
        type: string
    type: object
  models.FilesResponse:
    properties:
      files:
        items:
          $ref: '#/definitions/models.FileResponse'
        type: array
    type: object
  models.HealthResponse:
    properties:
      status:
        type: string
    type: object
  models.OrderListResponse:
    properties:
      orders:
        items:
          $ref: '#/definitions/models.OrderSummary'
        type: array
    type: object
  models.OrderResponse:
    properties:
      created_at:
        type: string
      error_message:
        type: string
      metadata:
        additionalProperties: true
        type: object
      order_id:
        type: string
      progress:
        type: integer
      status:
        type: string
      updated_at:
        type: string
    type: object
  models.OrderSummary:
    properties:
      created_at:
        type: string
      order_id:
        type: string
      progress:
        type: integer
      status:
        type: string
      updated_at:
        type: string
    type: object
  models.ProcessRequest:
    properties:
      enhance_type:
        description: |-
          EnhanceType specifies the type of enhancement to apply
          Options: "property", "property_usa", "warm", "neutral", "modern"
          Default: "property" for real estate photography
        example: property
        type: string
      lens_correction:
        example: true
        type: boolean
      metadata:
        additionalProperties: true
        description: Optional metadata to store with the processing request
        type: object
      privacy:
        example: false
        type: boolean
      sky_replacement:
        example: true
        type: boolean
      upscale:
        example: false
        type: boolean
      vertical_correction:
        example: true
        type: boolean
      window_pull_type:
        description: '"NONE", "ONLY_WINDOWS", "WINDOWS_WITH_SKIES"'
        example: ONLY_WINDOWS
        type: string
    type: object
  models.ProcessResponse:
    properties:
      order_id:
        type: string
      status:
        type: string
    type: object
  models.StatusResponse:
    properties:
      order_id:
        type: string
      progress:
        type: integer
      status:
        type: string
      updated_at:
        type: string
    type: object
  models.UploadResponse:
    properties:
      files:
        items:
          $ref: '#/definitions/models.FileInfo'
        type: array
      order_id:
        type: string
      status:
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: support@example.com
    name: API Support
  description: Backend API for processing bracketed images with AutoEnhance AI HDR
    merging. This API handles order creation, image uploads, HDR processing, and real-time
    status updates via Supabase Realtime.
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  title: Instant HDR Backend API
  version: 1.0.0
paths:
  /health:
    get:
      consumes:
      - application/json
      description: Returns the health status of the API
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.HealthResponse'
      summary: Health check
      tags:
      - health
  /orders:
    get:
      consumes:
      - application/json
      description: Returns a list of all orders for the authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.OrderListResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: List all orders
      tags:
      - orders
    post:
      consumes:
      - application/json
      description: Creates a new AutoEnhance AI order for a listing (real estate shoot).
        Returns the order ID and AutoEnhance order ID.
      parameters:
      - description: Order metadata (optional)
        in: body
        name: request
        schema:
          $ref: '#/definitions/models.CreateOrderRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.OrderResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Create a new order
      tags:
      - orders
  /orders/{order_id}:
    delete:
      consumes:
      - application/json
      description: Deletes an order, including associated AutoEnhance AI order and
        files from Supabase Storage
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: message
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Delete an order
      tags:
      - orders
    get:
      consumes:
      - application/json
      description: Returns detailed information about a specific order
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.OrderResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Get order details
      tags:
      - orders
  /orders/{order_id}/files:
    get:
      consumes:
      - application/json
      description: Returns a list of all processed files associated with an order,
        including their Supabase Storage URLs
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.FilesResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Get order files
      tags:
      - files
  /orders/{order_id}/process:
    post:
      consumes:
      - application/json
      description: Initiates HDR processing and merging of uploaded images using AutoEnhance
        AI. Groups brackets into images and processes them with the specified enhancement
        options.
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      - description: Processing options. enhance_type defaults to 'property' for real
          estate photography.
        in: body
        name: request
        schema:
          $ref: '#/definitions/models.ProcessRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.ProcessResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Process images with HDR merge
      tags:
      - process
  /orders/{order_id}/status:
    get:
      consumes:
      - application/json
      description: Returns the current status and progress of an order. For real-time
        updates, connect to Supabase Realtime.
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.StatusResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Get order status
      tags:
      - status
  /orders/{order_id}/upload:
    post:
      consumes:
      - multipart/form-data
      description: Uploads multiple bracketed images to an AutoEnhance AI order. All
        images in a single upload are expected to be bracketed images of the same
        shot.
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      - description: Bracketed images (multiple files allowed)
        in: formData
        name: images
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.UploadResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Upload images to order
      tags:
      - upload
  /webhooks/autoenhance:
    post:
      consumes:
      - application/json
      description: Receives webhook callbacks from AutoEnhance AI for processing status
        updates. Uses authentication token verification.
      parameters:
      - description: Authentication token (configured in AutoEnhance web app)
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: status
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: AutoEnhance AI webhook endpoint
      tags:
      - webhooks
securityDefinitions:
  Bearer:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
