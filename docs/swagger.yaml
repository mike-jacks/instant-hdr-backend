basePath: /api/v1
definitions:
  models.BracketResponse:
    properties:
      bracket_id:
        type: string
      created_at:
        type: string
      filename:
        type: string
      id:
        type: string
      image_id:
        type: string
      is_uploaded:
        type: boolean
      metadata:
        additionalProperties: true
        type: object
    type: object
  models.BracketsResponse:
    properties:
      brackets:
        items:
          $ref: '#/definitions/models.BracketResponse'
        type: array
    type: object
  models.CreateOrderRequest:
    properties:
      name:
        description: |-
          Order name/description (e.g., "123 Main St - Living Room")
          If not provided, defaults to "Order"
        example: Property Shoot - 123 Main St
        type: string
    type: object
  models.DownloadImageRequest:
    properties:
      format:
        description: |-
          Format - Image format: "jpeg" (default), "png", or "webp"
          Example: "jpeg"
        example: jpeg
        type: string
      max_width:
        description: |-
          MaxWidth - Custom width in pixels (only used when quality="custom")
          Example: 2400
        example: 2400
        type: integer
      quality:
        description: |-
          Quality preset - Options: "thumbnail" (400px), "preview" (800px), "medium" (1920px), "high" (full res), or "custom"
          Default: "preview"
          Example: "high"
        example: high
        type: string
      scale:
        description: |-
          Scale - Scale factor (only used when quality="custom")
          Example: 0.5 for 50% of original size
        example: 0.5
        type: number
      watermark:
        description: |-
          Watermark - Whether to include watermark. Defaults to true (FREE). Set to false to use 1 credit (unwatermarked)
          Example: true
        example: true
        type: boolean
    type: object
  models.DownloadImageResponse:
    properties:
      credit_used:
        description: CreditUsed indicates if this download cost a credit
        example: false
        type: boolean
      file_size:
        description: FileSize in bytes
        example: 2621440
        type: integer
      format:
        description: Format of the downloaded image
        example: jpeg
        type: string
      image_id:
        description: ImageID from AutoEnhance
        example: img_abc123
        type: string
      message:
        description: Message with download details
        example: 'Image downloaded successfully (FREE with watermark) - Quality: high,
          Resolution: full'
        type: string
      quality:
        description: Quality preset used
        example: high
        type: string
      resolution:
        description: Resolution achieved (e.g., "400px", "800px", "1920px", "full")
        example: full
        type: string
      url:
        description: URL to access the image in Supabase Storage (publicly accessible)
        example: https://project.supabase.co/storage/v1/object/public/hdr-images/users/user123/orders/order456/img_abc123_high.jpg
        type: string
      watermark:
        description: Watermark indicates if watermark was applied (true = FREE, false
          = COSTS 1 CREDIT)
        example: true
        type: boolean
    type: object
  models.ErrorResponse:
    properties:
      error:
        type: string
      message:
        type: string
    type: object
  models.FileInfo:
    properties:
      filename:
        type: string
      size:
        type: integer
    type: object
  models.FileResponse:
    properties:
      created_at:
        type: string
      file_size:
        type: integer
      filename:
        type: string
      id:
        type: string
      is_final:
        type: boolean
      mime_type:
        type: string
      storage_url:
        type: string
    type: object
  models.FilesResponse:
    properties:
      files:
        items:
          $ref: '#/definitions/models.FileResponse'
        type: array
    type: object
  models.HealthResponse:
    properties:
      status:
        type: string
    type: object
  models.ImageResponse:
    properties:
      downloaded:
        type: boolean
      enhance_type:
        type: string
      high_res_downloaded:
        type: boolean
      high_res_url:
        description: Supabase URL for high-res
        type: string
      image_id:
        type: string
      image_name:
        type: string
      preview_downloaded:
        type: boolean
      preview_url:
        description: Supabase URL for preview
        type: string
      processing_settings:
        additionalProperties: true
        type: object
      status:
        type: string
    type: object
  models.ImagesResponse:
    properties:
      images:
        items:
          $ref: '#/definitions/models.ImageResponse'
        type: array
    type: object
  models.OrderListResponse:
    properties:
      orders:
        items:
          $ref: '#/definitions/models.OrderSummary'
        type: array
    type: object
  models.OrderResponse:
    properties:
      autoenhance_status:
        description: AutoEnhance data (when available)
        type: string
      created_at:
        type: string
      error_message:
        type: string
      images:
        items:
          additionalProperties: true
          type: object
        type: array
      is_processing:
        type: boolean
      metadata:
        additionalProperties: true
        type: object
      order_id:
        type: string
      progress:
        type: integer
      status:
        type: string
      total_brackets:
        type: integer
      total_images:
        type: integer
      updated_at:
        type: string
      uploaded_brackets:
        type: integer
    type: object
  models.OrderSummary:
    properties:
      created_at:
        type: string
      order_id:
        type: string
      progress:
        type: integer
      status:
        type: string
      updated_at:
        type: string
    type: object
  models.ProcessRequest:
    properties:
      ai_version:
        description: |-
          AIVersion specifies the AI model version to use for processing.
          Examples: "4.0", "5.2", "5.x"
          Versions ending in .x (e.g., "5.x") will automatically use the latest minor version.
          Default: Latest stable version (automatically selected by AutoEnhance)
        example: 5.x
        type: string
      bracket_grouping:
        description: |-
          BracketGrouping specifies how uploaded brackets are organized into HDR images.
          Options: "by_upload_group", "auto", "all", "individual", or custom array
          - "by_upload_group" (RECOMMENDED): Groups brackets by group_id assigned during upload
          - "auto": Groups brackets sequentially by sets (e.g., every 3 brackets = 1 HDR)
          - "all": Merges ALL brackets into ONE HDR image (maximum dynamic range)
          - "individual": Each bracket becomes a separate image (no HDR merging)
          - Custom array: [[id1,id2,id3],[id4,id5]] - Specify exact bracket groupings by bracket_id
          Default: "by_upload_group"
        example: by_upload_group
        type: string
      brackets_per_image:
        description: |-
          BracketsPerImage specifies how many consecutive brackets to group into one HDR image.
          Only used when bracket_grouping is "auto". This tells the system to group brackets sequentially.

          Example with 6 brackets and brackets_per_image=3:
            - Brackets [1,2,3] → HDR Image #1
            - Brackets [4,5,6] → HDR Image #2

          Common values:
          - 3 (DEFAULT): Standard 3-exposure HDR (underexposed, normal, overexposed)
            Best for: Most real estate shots, typical bracketing workflows
          - 5: 5-exposure HDR for more dynamic range
            Best for: High-contrast scenes, sunset/sunrise shots
          - 7: 7-exposure HDR for maximum detail in shadows and highlights
            Best for: Extreme lighting (bright windows + dark interiors)

          Note: More brackets = better HDR but longer processing time
          Default: 3
        example: 3
        type: integer
      cloud_type:
        description: |-
          CloudType specifies what type of clouds to add when sky replacement is enabled.
          Options: "CLEAR", "LOW_CLOUD", "HIGH_CLOUD"
          - "CLEAR": Clear blue sky with minimal clouds
          - "LOW_CLOUD": Low-altitude clouds for subtle effect
          - "HIGH_CLOUD": High-altitude clouds for more dramatic skies
          Default: null (AutoEnhance chooses automatically based on scene)
        enum:
        - CLEAR
        - LOW_CLOUD
        - HIGH_CLOUD
        example: CLEAR
        type: string
      enhance_type:
        description: |-
          EnhanceType specifies the type of enhancement to apply to the image.
          Options: "property", "property_usa", "warm", "neutral", "modern"
          - "property" (DEFAULT): Best for real estate photography - balanced enhancement
          - "property_usa": USA-specific real estate enhancement (for AI version < 4.0)
          - "warm": Warm color grading for cozy, inviting feel (AI version >= 4.0)
          - "neutral": Neutral color grading for natural look (AI version >= 4.0)
          - "modern": Modern, contemporary enhancement style (AI version >= 4.0)
          Default: "property"
        enum:
        - property
        - property_usa
        - warm
        - neutral
        - modern
        example: property
        type: string
      lens_correction:
        description: |-
          LensCorrection removes lens distortion (barrel/pincushion effect).
          Corrects curved lines caused by wide-angle lenses commonly used in real estate.
          Recommended for all real estate photos.
          Default: true
        example: true
        type: boolean
      metadata:
        additionalProperties: true
        description: Optional metadata to store with the processing request for your
          own tracking
        type: object
      privacy:
        description: |-
          Privacy blurs faces and license plates for privacy compliance.
          Useful for public listings where privacy protection is required.
          Default: false
        example: false
        type: boolean
      sky_replacement:
        description: |-
          SkyReplacement enables AI-powered sky replacement with realistic clouds.
          When enabled, dull or overcast skies are replaced with attractive blue skies.
          Works best with outdoor property photos.
          Default: true (recommended for real estate)
        example: true
        type: boolean
      upscale:
        description: |-
          Upscale increases image resolution using AI upscaling technology.
          Doubles the resolution while maintaining quality.
          Warning: Significantly increases processing time and final file size.
          Default: false
        example: false
        type: boolean
      vertical_correction:
        description: |-
          VerticalCorrection automatically corrects vertical perspective distortion.
          Straightens walls and vertical lines that appear tilted due to camera angle.
          Essential for professional real estate photography.
          Default: true (highly recommended)
        example: true
        type: boolean
      window_pull_type:
        description: |-
          WindowPullType controls how window views are enhanced.
          Options: "NONE", "ONLY_WINDOWS", "WINDOWS_WITH_SKIES"
          - "NONE": No window enhancement (keep original window views)
          - "ONLY_WINDOWS": Enhance window views only (bring out detail)
          - "WINDOWS_WITH_SKIES" (DEFAULT): Enhance windows AND replace exterior skies visible through windows (requires AI version >= 5.2)
          Default: "WINDOWS_WITH_SKIES" (recommended for best results)
        enum:
        - NONE
        - ONLY_WINDOWS
        - WINDOWS_WITH_SKIES
        example: WINDOWS_WITH_SKIES
        type: string
    type: object
  models.ProcessResponse:
    properties:
      message:
        type: string
      order_id:
        type: string
      processing_params:
        additionalProperties: true
        type: object
      status:
        type: string
    type: object
  models.StatusResponse:
    properties:
      autoenhance_status:
        description: AutoEnhance data
        type: string
      images:
        items:
          additionalProperties: true
          type: object
        type: array
      is_processing:
        type: boolean
      order_id:
        type: string
      progress:
        type: integer
      status:
        type: string
      total_brackets:
        type: integer
      total_images:
        type: integer
      updated_at:
        type: string
      uploaded_brackets:
        type: integer
    type: object
  models.UploadErrorInfo:
    properties:
      error:
        type: string
      filename:
        type: string
      stage:
        description: '"create_bracket", "upload", "verify", "database"'
        type: string
    type: object
  models.UploadResponse:
    properties:
      errors:
        items:
          $ref: '#/definitions/models.UploadErrorInfo'
        type: array
      files:
        items:
          $ref: '#/definitions/models.FileInfo'
        type: array
      order_id:
        type: string
      status:
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: support@example.com
    name: API Support
  description: Backend API for processing bracketed images with AutoEnhance AI HDR
    merging. This API handles order creation, image uploads, HDR processing, and real-time
    status updates via Supabase Realtime.
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  title: Instant HDR Backend API
  version: 1.0.0
paths:
  /health:
    get:
      consumes:
      - application/json
      description: Returns the health status of the API
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.HealthResponse'
      summary: Health check
      tags:
      - health
  /orders:
    get:
      consumes:
      - application/json
      description: Returns a list of all orders for the authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.OrderListResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: List all orders
      tags:
      - orders
    post:
      consumes:
      - application/json
      description: Creates a new AutoEnhance AI order for a listing (real estate shoot).
        You can optionally provide a custom name for the order.
      parameters:
      - description: Order name (optional, defaults to 'Order')
        in: body
        name: request
        schema:
          $ref: '#/definitions/models.CreateOrderRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.OrderResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Create a new order
      tags:
      - orders
  /orders/{order_id}:
    delete:
      consumes:
      - application/json
      description: Deletes an order, including associated AutoEnhance AI order and
        files from Supabase Storage
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: message
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Delete an order
      tags:
      - orders
    get:
      consumes:
      - application/json
      description: Returns detailed information about a specific order
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.OrderResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Get order details
      tags:
      - orders
  /orders/{order_id}/brackets:
    get:
      consumes:
      - application/json
      description: Returns a list of all uploaded brackets (raw images) for an order
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.BracketsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Get uploaded brackets
      tags:
      - brackets
  /orders/{order_id}/brackets/{bracket_id}:
    delete:
      consumes:
      - application/json
      description: 'Deletes a bracket (uploaded raw image) from AutoEnhance AI. Note:
        Brackets are automatically cleaned up after successful processing.'
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      - description: Bracket ID from AutoEnhance
        in: path
        name: bracket_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: message
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Delete an uploaded bracket
      tags:
      - brackets
  /orders/{order_id}/files:
    get:
      consumes:
      - application/json
      description: Returns a list of all processed files associated with an order,
        including their Supabase Storage URLs
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.FilesResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Get order files
      tags:
      - files
  /orders/{order_id}/images:
    get:
      consumes:
      - application/json
      description: Returns a list of all processed images for an order with their
        download status
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.ImagesResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: List processed images
      tags:
      - images
  /orders/{order_id}/images/{image_id}:
    delete:
      consumes:
      - application/json
      description: Deletes a processed image from AutoEnhance AI and all associated
        files from Supabase Storage and database
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      - description: Image ID from AutoEnhance
        in: path
        name: image_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: message
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Delete a processed image
      tags:
      - images
  /orders/{order_id}/images/{image_id}/download:
    post:
      consumes:
      - application/json
      description: |-
        Downloads a processed image from AutoEnhance and stores it in Supabase Storage.

        Quality Options:
        - "thumbnail": 400px width (~50-100KB) - List view
        - "preview": 800px width (~150-250KB) - Gallery view (DEFAULT)
        - "medium": 1920px width (~500KB-1MB) - Full screen
        - "high": Full resolution (~2-5MB) - Client delivery
        - "custom": Specify max_width or scale

        Format Options: "jpeg" (default), "png", "webp"

        Watermark (defaults to true = FREE):
        - true: FREE download with watermark
        - false: COSTS 1 CREDIT (unwatermarked)
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      - description: Image ID from AutoEnhance
        in: path
        name: image_id
        required: true
        type: string
      - description: Download options
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.DownloadImageRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.DownloadImageResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Download processed image to Supabase Storage
      tags:
      - images
  /orders/{order_id}/process:
    post:
      consumes:
      - application/json
      description: |-
        Initiates HDR processing and merging of uploaded images using AutoEnhance AI.

        **Processing Options:**

        **enhance_type** (default: "property"):
        - "property": Best for real estate - balanced enhancement
        - "warm": Warm color grading for cozy feel (AI >= 4.0)
        - "neutral": Neutral natural look (AI >= 4.0)
        - "modern": Contemporary enhancement (AI >= 4.0)

        **sky_replacement** (default: true):
        - Replaces dull skies with attractive blue skies

        **cloud_type** (optional):
        - "CLEAR": Clear blue sky, "LOW_CLOUD": Subtle clouds, "HIGH_CLOUD": Dramatic clouds

        **window_pull_type** (default: "WINDOWS_WITH_SKIES"):
        - "NONE": No window enhancement
        - "ONLY_WINDOWS": Enhance window views only
        - "WINDOWS_WITH_SKIES": Enhance windows + replace exterior skies (AI >= 5.2) - BEST RESULTS

        **vertical_correction** (default: true):
        - Straightens tilted walls and vertical lines

        **lens_correction** (default: true):
        - Removes wide-angle lens distortion

        **upscale** (default: false):
        - AI upscaling to double resolution (increases processing time)

        **privacy** (default: false):
        - Blurs faces and license plates

        **bracket_grouping** (default: "by_upload_group"):
        - "by_upload_group": Use groups from upload
        - "auto": Sequential sets (every N brackets = 1 HDR, where N = brackets_per_image)
        - "all": One mega-HDR from all brackets
        - "individual": Separate images (no HDR)

        **brackets_per_image** (default: 3, only for "auto" mode):
        - How many consecutive brackets to merge into one HDR image
        - Example: 6 brackets + brackets_per_image=3 → 2 HDR images ([1,2,3] and [4,5,6])
        - 3 = Standard HDR, 5 = High dynamic range, 7 = Extreme lighting
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      - description: Processing options with defaults shown in model
        in: body
        name: request
        schema:
          $ref: '#/definitions/models.ProcessRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.ProcessResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Process images with HDR merge
      tags:
      - process
  /orders/{order_id}/status:
    get:
      consumes:
      - application/json
      description: Returns the current status and progress of an order. For real-time
        updates, connect to Supabase Realtime.
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.StatusResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Get order status
      tags:
      - status
  /orders/{order_id}/upload:
    post:
      consumes:
      - multipart/form-data
      description: |-
        Uploads multiple bracketed images to an AutoEnhance AI order.

        **Automatic Grouping (Default):**
        - All images in one upload call are automatically assigned the same group UUID
        - This makes each upload = one HDR image
        - Example: Upload 3 brackets → They all get the same group_id → Process as 1 HDR

        **Custom Grouping (Advanced):**
        - Optionally specify different group IDs for files in the same upload
        - Example: groups="living-room,living-room,living-room,kitchen,kitchen,kitchen"
        - This creates multiple HDR groups in one upload call

        **Workflow:**
        1. Upload bedroom brackets (3 images) → Auto-grouped as one HDR
        2. Upload kitchen brackets (3 images) → Auto-grouped as another HDR
        3. Process with bracket_grouping="by_upload_group" → 2 HDR images
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      - description: Bracketed images (multiple files allowed)
        in: formData
        name: images
        required: true
        type: file
      - description: 'Advanced: Custom group ID for each file (comma-separated). If
          not provided, all files get the same auto-generated UUID.'
        in: formData
        name: groups
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.UploadResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Upload images with automatic or custom grouping
      tags:
      - upload
  /orders/{order_id}/verify:
    get:
      consumes:
      - application/json
      description: Checks with AutoEnhance API to verify that an order has uploaded
        brackets/images
      parameters:
      - description: Order ID (UUID)
        in: path
        name: order_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: verification result
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - Bearer: []
      summary: Verify order has uploaded images in AutoEnhance
      tags:
      - orders
  /webhooks/autoenhance:
    post:
      consumes:
      - application/json
      description: Receives webhook callbacks from AutoEnhance AI for processing status
        updates. Uses authentication token verification.
      parameters:
      - description: Authentication token (configured in AutoEnhance web app)
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: status
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: AutoEnhance AI webhook endpoint
      tags:
      - webhooks
securityDefinitions:
  Bearer:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
